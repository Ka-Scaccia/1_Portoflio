window.addEventListener("pagehide",function(){if(socket&&socket.readyState===WebSocket.OPEN){socket.close()}});navigator.sendBeacon("/log",JSON.stringify({evento:"click",pagina:location.href}));document.getElementById("ButtonSend").onclick=function(event){event.preventDefault();let oggettoEl=document.getElementById("oggetto");let nomeEl=document.getElementById("nome");let cognomeEl=document.getElementById("cognome");let emailEl=document.getElementById("email");let messaggioEl=document.getElementById("mess");let oggetto=oggettoEl.value;let nome=nomeEl.value;let cognome=cognomeEl.value;let email=emailEl.value;if(!oggetto||!nome||!cognome||!email){alert("Inserire tutti i campi!");return}
const emailRegex=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/;if(!emailRegex.test(email)){alert("Inserire un'email valida!");return}
oggettoEl.value="";nomeEl.value="";cognomeEl.value="";emailEl.value="";messaggioEl.value="";alert("Messaggio inviato con successo!")}
try{const socket=new WebSocket("ws://indirizzo/corretto");socket.onerror=function(e){console.warn("Errore nella connessione WebSocket:",e)}}catch(e){console.error("WebSocket fallito:",e)}